# Requirements Document

## Introduction

Limoncuk Eğitim is a comprehensive AI-powered educational mobile application built with Flutter for iOS and Android platforms. The system enables students at all educational levels (elementary, middle school, high school, university, and exam preparation like YKS, KPSS, ALES, DGS) to solve questions by taking photos and receiving detailed AI-generated solutions. The application provides unlimited free usage without any credit system, intelligent weekly study planning, book and topic tracking, advanced analytics with visualizations, and an admin panel for system management.

## Glossary

- **System**: The Limoncuk Eğitim mobile application
- **User**: A student using the application to solve questions and track their learning progress
- **Admin**: An authorized user with elevated permissions to manage users and view system-wide analytics
- **AI Engine**: The artificial intelligence service (GPT-4 or Google Gemini) that analyzes question images and generates solutions
- **Solution**: A detailed step-by-step answer to a question, generated by the AI Engine
- **Study Plan**: An AI-generated weekly schedule of study sessions tailored to the User's performance
- **Analytics**: Statistical data about User performance, including success rates, streaks, and topic mastery
- **Achievement**: A digital badge earned by Users for reaching specific milestones
- **Book**: A physical or digital textbook tracked by the User for progress monitoring
- **Topic Note**: User-created or AI-generated notes about specific educational topics
- **Session**: A timed study period within a Study Plan
- **Streak**: The number of consecutive days a User has solved at least one question
- **Firebase**: The backend infrastructure providing authentication, database, storage, and cloud functions
- **Firestore**: The NoSQL database service used for storing User data, Solutions, and Analytics
- **Cloud Function**: A serverless function that processes AI requests and updates Analytics
- **Retry**: When a User marks a Solution as incorrect and requests a new analysis of the same question

## Requirements

### Requirement 1: User Authentication and Profile Management

**User Story:** As a student, I want to create an account and manage my profile, so that I can access the application securely and personalize my learning experience.

#### Acceptance Criteria

1. WHEN a new User provides valid email and password credentials, THE System SHALL create a new account using Firebase Authentication
2. WHEN a User provides valid Google OAuth credentials, THE System SHALL authenticate the User using Google Sign-In
3. WHEN a User provides valid Apple ID credentials on iOS devices, THE System SHALL authenticate the User using Apple Sign-In
4. WHEN a User requests password reset with a registered email address, THE System SHALL send a password reset link to that email address
5. WHEN a User uploads a profile photo not exceeding 5 megabytes, THE System SHALL store the photo in Firebase Storage and update the User profile
6. WHEN a User updates their student class or exam types, THE System SHALL save the changes to Firestore and reflect them immediately in the User interface
7. WHILE a User session is active, THE System SHALL track the last active timestamp in Firestore

### Requirement 2: AI-Powered Question Solving

**User Story:** As a student, I want to take a photo of a question and receive a detailed AI-generated solution, so that I can understand how to solve similar problems.

#### Acceptance Criteria

1. WHEN a User captures a photo using the device camera, THE System SHALL display a full-screen preview with editing tools including crop, rotate, brightness, and contrast adjustments
2. WHEN a User selects an image from the device gallery not exceeding 20 megabytes, THE System SHALL load the image for question analysis
3. WHEN a User selects an exam type and subject before submitting a question photo, THE System SHALL include this metadata in the AI analysis request
4. WHEN a User submits a question photo, THE System SHALL upload the image to Firebase Storage and invoke a Cloud Function to process the AI analysis
5. WHEN the Cloud Function receives a question analysis request, THE System SHALL call the configured AI Engine (GPT-4 or Gemini) with the image and metadata
6. WHEN the AI Engine returns a solution, THE System SHALL store the Solution in Firestore with all step-by-step details, option analysis, topic explanation, and exam tips
7. WHEN a Solution is successfully created, THE System SHALL display the Solution to the User with formatted steps, LaTeX formulas, and interactive elements
8. WHEN a User marks a Solution as incorrect, THE System SHALL increment the retry count and resubmit the question to the AI Engine with a modified prompt requesting an alternative approach
9. WHEN a User marks a Solution as correct, THE System SHALL update the Analytics to record a successful question attempt
10. WHEN a User saves a Solution to favorites, THE System SHALL update the Solution document in Firestore with the favorite flag set to true

### Requirement 3: Analytics and Statistics Tracking

**User Story:** As a student, I want to view detailed statistics about my learning progress, so that I can identify my strengths and weaknesses and track my improvement over time.

#### Acceptance Criteria

1. WHEN a User completes a question (marks it as correct or incorrect), THE System SHALL update the Analytics document in Firestore with the new attempt data
2. WHEN a User solves at least one question on consecutive days, THE System SHALL increment the current streak counter in Analytics
3. WHEN a User fails to solve any questions for 24 hours, THE System SHALL reset the current streak to zero
4. WHEN a User views the statistics dashboard, THE System SHALL calculate and display overall success rate as the ratio of successful questions to total questions solved
5. WHEN a User views subject-specific statistics, THE System SHALL display success rate, total questions, and last studied date for each subject
6. WHEN a User views topic performance, THE System SHALL calculate and display the trend (improving, stable, or declining) based on the last five attempts
7. WHEN a User achieves a milestone defined in the Achievement system, THE System SHALL unlock the corresponding Achievement and display a notification
8. WHEN a User views the activity calendar, THE System SHALL display a color-coded grid showing daily question counts for the current month
9. WHERE a topic has a success rate below 60 percent, THE System SHALL classify it as a weak topic and display it in the weak topics section
10. WHERE a topic has a success rate above 80 percent, THE System SHALL classify it as a strong topic and display it in the strong topics section

### Requirement 4: Intelligent Weekly Study Planning

**User Story:** As a student, I want the system to generate a personalized weekly study plan based on my performance, so that I can focus on areas that need improvement and maintain a balanced study routine.

#### Acceptance Criteria

1. WHEN a User requests a new weekly study plan, THE System SHALL analyze the User's performance data from the previous 14 days
2. WHEN generating a Study Plan, THE System SHALL identify weak topics with success rates below 60 percent and prioritize them in the schedule
3. WHEN generating a Study Plan, THE System SHALL identify topics not studied in the last 7 days and include them in the schedule
4. WHEN generating a Study Plan, THE System SHALL distribute study sessions across all weekdays based on the User's preferred daily study duration
5. WHEN a Study Plan is created, THE System SHALL generate an AI recommendation explaining why specific topics were selected and providing motivational guidance
6. WHEN a User completes a study session, THE System SHALL mark the session as completed and update the actual questions solved count
7. WHEN a User views their weekly plan, THE System SHALL display daily progress with completed and pending sessions clearly indicated
8. WHERE a User has an upcoming exam within 30 days, THE System SHALL allocate 70 percent of study time to weak topics
9. WHERE a User has no upcoming exam, THE System SHALL create a balanced plan including new topic learning and review sessions

### Requirement 5: Book and Topic Tracking

**User Story:** As a student, I want to track my progress through textbooks and organize my study notes, so that I can manage my learning materials effectively.

#### Acceptance Criteria

1. WHEN a User manually enters book details including title, author, publisher, and total pages, THE System SHALL create a new Book document in Firestore
2. WHEN a User scans a book's ISBN barcode, THE System SHALL attempt to retrieve book information automatically and create a Book document
3. WHEN a User updates the current page number for a Book, THE System SHALL calculate and update the progress percentage
4. WHEN a User marks a chapter as completed, THE System SHALL update the chapter status and record the completion timestamp
5. WHEN a User creates a Topic Note with markdown content, THE System SHALL store the note in Firestore with support for LaTeX formulas and image attachments
6. WHERE the User settings have auto-add notes enabled, THE System SHALL automatically create a Topic Note with the AI-generated topic explanation after each Solution
7. WHEN a User searches for notes, THE System SHALL filter notes by subject, topic, tags, or content text
8. WHEN a User pins a Topic Note, THE System SHALL display the note at the top of the notes list

### Requirement 6: User Interface and Experience

**User Story:** As a student, I want an intuitive and visually appealing interface with dark mode support, so that I can use the application comfortably in different lighting conditions.

#### Acceptance Criteria

1. WHEN a User launches the application, THE System SHALL display a bottom navigation bar with five tabs: Home, Solve, Stats, Library, and Settings
2. WHEN a User enables dark mode in settings, THE System SHALL apply the dark theme color palette to all screens immediately
3. WHEN a User changes the language setting, THE System SHALL update all text labels to the selected language (Turkish or English)
4. WHEN a User views a Solution with LaTeX formulas, THE System SHALL render the formulas correctly using a math rendering library
5. WHEN a User views charts in the statistics section, THE System SHALL display interactive line charts, bar charts, and pie charts with smooth animations
6. WHEN a User navigates between screens, THE System SHALL use smooth page transitions with appropriate loading indicators
7. WHEN the System is processing an AI request, THE System SHALL display an animated loading screen with estimated time remaining
8. WHERE network connectivity is unavailable, THE System SHALL display cached data and indicate offline status to the User

### Requirement 7: Admin Panel and System Management

**User Story:** As an admin, I want to view system-wide analytics and manage users, so that I can monitor application health and address user issues.

#### Acceptance Criteria

1. WHEN an Admin user logs in, THE System SHALL verify admin status by checking the adminUsers collection in Firestore
2. WHEN an Admin views the dashboard, THE System SHALL display total user count, active users, and total questions solved
3. WHEN an Admin searches for users by name, email, or ID, THE System SHALL return matching User profiles with their statistics
4. WHEN an Admin views a User detail page, THE System SHALL display the User's profile, Analytics, Books, Study Plans, and recent Solutions
5. WHEN an Admin generates a report for a date range, THE System SHALL calculate and display user growth, question trends, subject distribution, and difficult topics
6. WHERE an Admin has appropriate permissions, THE System SHALL allow the Admin to ban or unban User accounts
7. WHEN an Admin exports a report, THE System SHALL generate a PDF or Excel file with the selected data

### Requirement 8: Notification System

**User Story:** As a student, I want to receive timely notifications about my study schedule and achievements, so that I stay motivated and on track with my learning goals.

#### Acceptance Criteria

1. WHEN the daily reminder time arrives and the User has notifications enabled, THE System SHALL send a push notification encouraging the User to study
2. WHEN a Solution analysis is completed, THE System SHALL send a push notification informing the User that the solution is ready
3. WHEN a User unlocks a new Achievement, THE System SHALL send a push notification with the Achievement name and icon
4. WHEN Sunday at 21:00 arrives, THE System SHALL send a weekly summary notification with the User's question count and success rate
5. WHEN the current time is 23:00 and the User has not solved any questions that day, THE System SHALL send a streak warning notification
6. WHERE a User has a scheduled study session in their weekly plan, THE System SHALL send a reminder notification at the session start time

### Requirement 9: Offline Mode and Data Synchronization

**User Story:** As a student, I want to access my previously solved questions and notes when offline, so that I can continue studying without internet connectivity.

#### Acceptance Criteria

1. WHERE network connectivity is unavailable, THE System SHALL allow Users to view previously loaded Solutions from local cache
2. WHERE network connectivity is unavailable, THE System SHALL allow Users to create and edit Topic Notes with local storage
3. WHERE network connectivity is unavailable, THE System SHALL allow Users to update Book progress with local storage
4. WHEN network connectivity is restored after offline usage, THE System SHALL synchronize all pending changes to Firestore
5. IF a data conflict occurs during synchronization, THEN THE System SHALL resolve the conflict using the most recent timestamp

### Requirement 10: Security and Privacy

**User Story:** As a student, I want my personal data and question photos to be stored securely, so that my privacy is protected.

#### Acceptance Criteria

1. THE System SHALL encrypt all data transmitted between the mobile application and Firebase using HTTPS protocol
2. THE System SHALL store User passwords using Firebase Authentication's secure hashing mechanism
3. THE System SHALL enforce Firebase Security Rules ensuring Users can only access their own Solutions, Analytics, Books, and Topic Notes
4. THE System SHALL store question images in Firebase Storage with access restricted to the owning User only
5. WHERE a User requests account deletion, THE System SHALL permanently delete all associated data including profile, Solutions, Analytics, Books, and images within 30 days
6. THE System SHALL store AI API keys securely in Cloud Functions environment variables and never expose them to the mobile application
7. THE System SHALL implement rate limiting on Cloud Functions to prevent abuse and excessive API usage
